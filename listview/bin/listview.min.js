function ListView(a,b,c){function d(){var a,c,d,e=b.getElementsCount();return 0===e?0:(a=b.getElement(0,null,{width:0,height:0}),d=document.createElement("div"),d.style.position="absolute",d.className=y,d.appendChild(a),p.appendChild(d),c=d.getBoundingClientRect(),s=c.height,r=c.width,p.removeChild(d),"vertical"===x?s:r)}function e(){var a=document.createElement("div");a.style.position="absolute",a.style.height=s+"px",a.style.width=r+"px",a.style.webkitFontSmoothing="antialiased",a.className=y,this.wrapper=a,this.item=null,this.position=null,this.index=0,this.timeout=null,this.handler={width:0,height:0},this.taskTimestamp=0,this.task=null}function f(){if(C.length>1){var a,b=C.pop(),c=b.wrapper.parentNode;c.removeChild(b.wrapper);for(a in b)b.hasOwnProperty(a)&&(b[a]=null);v=setTimeout(f,150)}}function g(a){return setTimeout(function(){a.wrapper.style[t]="vertical"!==x?"translate3d(0, 999999px, 0)":"translate3d(999999px, 0, 0)"},100)}function h(){var a,b,c=window.performance.now();for(a=B.length-1;a>=0;a--)b=B[a],0!==b.taskTimestamp&&c-b.taskTimestamp>D&&(b.taskTimestamp=0,b.task(),b.task=null)}function i(){var a,c;for(a=B.length-1;a>=0;a--)if(c=B[a],c.taskTimestamp=0,c.task=null,c.index<b.getElementsCount()){var d=b.getElement(c.index,c.item,c.handler);c.wrapper.appendChild(d),c.item=d}}function j(a){var c=a.index,d=a.wrapper,e=a.handler;A[1]=a.position,a.wrapper.style[t]=A.join(""),a.wrapper.setAttribute("data-item",a.index),a.task=function(){if(c<b.getElementsCount()){var f=b.getElement(c,a.item,e);d.appendChild(f),a.item=f}},a.taskTimestamp=window.performance.now()}function k(a){for(var b,c,d=G;d>=0&&(d+1)*z>-a;)c=C.pop()||new e,c.handler.width=r,c.handler.height=s,c.position=d*z,c.index=d,b=c.wrapper,b.parentNode?clearTimeout(c.timeout):p.appendChild(b),c.timeout=j(c),d--,G=d,B.unshift(c)}function l(a){var c,d,f=b.getElementsCount(),g=F,h=F*z+a;for(g;f>g&&h<q._ParentSize;g++)h+=z,c=C.pop()||new e,c.handler.width=r,c.handler.height=s,c.position=g*z,c.index=g,d=c.wrapper,d.parentNode?clearTimeout(c.timeout):p.appendChild(d),c.timeout=j(c),B.push(c);F=g}function m(a){var b,c,d;for(b=0;b<B.length;b++)if(b===a){for(d=B[b],c=b;c<B.length-1;c++)B[c]=B[c+1];return B.length=B.length-1,d}}function n(a){var b,c,d,e;for(c=B.length-1;c>=0;c--)b=B[c],d=b.position>q._ParentSize-a,e=b.position+2*z<-a,(e||d)&&(b.timeout=g(b),C.push(m(c)),d?F=b.index:G<b.index&&(G=b.index))}function o(a){n(a),q._ParentSize-a>F*z&&l(a),(G+1)*z>-a&&k(a)}var p,q,r,s,t,u,v,w={},x=c&&c.direction?c.direction:"vertical",y=c?c.itemClass:"",z=0,A=[],B=[],C=[],D=1e3/(c&&c.requiredFPS?c.requiredFPS:20),E=0,F=0,G=-1,H="pointerdown";return t=addVendorPrefix("transform"),"vertical"===x?(A[0]="translate3d(0, ",A[2]="px, 0) scale(1)"):(A[0]="translate3d(",A[2]="px, 0, 0) scale(1)"),p=document.createElement("div"),p.style.width="100%",p.style.height="100%",a.insertBefore(p,a.firstChild),q=new ScrollView(a,c),q._calculateMaxScroll=function(){var a,c,e=r,f=s,h=d(),j=b.getElementsCount();if(G>j-1||0>G){for(G=j>0&&0>G?-1:j-1,F=G+1,c=B.length-1;c>=0;c--)a=B[c],(a.index<G||a.index>=F)&&(a.timeout=g(a),C.push(m(c)));q.scrollPosition=-Math.max(0,G)*h}if(e!==r||f!==s){var k,l;for(q.scrollPosition=-(G+1)*h,z=h,c=B.length-1;c>=0;c-=1)a=B[c],l=a.wrapper,k=a.index*z,A[1]=k,l.style.height=s+"px",l.style.width=r+"px",l.style[t]=A.join(""),a.position=k,a.handler.width=r,a.handler.height=s,b.getElement(B[c].index,a.item,B[c].handler);for(c=C.length-1;c>=0;c-=1)a=C[c],a.handler.width=r,a.handler.height=s,l=a.wrapper,l.style.height=s+"px",l.style.width=r+"px"}q._MaxScroll=z*b.getElementsCount()-q._ParentSize,q.setPosition(q.scrollPosition,!0),i()},w.setPosition=q.setPosition,q.setPosition=function(a,b){clearTimeout(v),w.setPosition.apply(q,arguments),u=window.performance.now(),(u-E>1e3/30||b)&&(o(a),h(),E=u),v=setTimeout(f,1e3)},w.handleEvent=q.handleEvent,q.handleEvent=function(a){w.handleEvent.apply(q,arguments),a.type===H&&(o(q.scrollPosition),i())},q.refresh(),o(0),q}