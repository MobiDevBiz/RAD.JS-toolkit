function ListView(a,b,c){function d(){var a,c,d,e=b.getElementsCount();return 0===e?0:(a=b.getElement(0,null,{width:0,height:0}),d=document.createElement("div"),d.style.position="absolute",d.className=x,d.appendChild(a),o.appendChild(d),c=d.getBoundingClientRect(),r=c.height,q=c.width,o.removeChild(d),"vertical"===w?r:q)}function e(){var a=document.createElement("div");a.style.position="absolute",a.style.height=r+"px",a.style.width=q+"px",a.style.webkitFontSmoothing="antialiased",a.className=x,this.wrapper=a,this.item=null,this.position=null,this.index=0,this.timeout=null,this.handler={width:0,height:0},this.taskTimestamp=0}function f(){if(B.length>1){var a,b=B.pop(),c=b.wrapper.parentNode;c.removeChild(b.wrapper);for(a in b)b.hasOwnProperty(a)&&(b[a]=null);u=setTimeout(f,150)}}function g(a){return setTimeout(function(){a.wrapper.style[s]="vertical"!==w?"translate3d(0, 999999px, 0)":"translate3d(999999px, 0, 0)"},100)}function h(a){var c,d,e=window.performance.now();for(c=A.length-1;c>=0;c--)if(d=A[c],0!==d.taskTimestamp&&(e-d.taskTimestamp>C||a)){if(d.index<b.getElementsCount()){var f=b.getElement(d.index,d.item,d.handler);d.wrapper.appendChild(f),d.item=f}d.taskTimestamp=0}}function i(a){z[1]=a.position,a.wrapper.style[s]=z.join(""),a.wrapper.setAttribute("data-item",a.index),a.taskTimestamp=window.performance.now()}function j(a){for(var b,c,d=F;d>=0&&(d+1)*y>-a;)c=B.pop()||new e,c.handler.width=q,c.handler.height=r,c.position=d*y,c.index=d,b=c.wrapper,b.parentNode?clearTimeout(c.timeout):o.appendChild(b),c.timeout=i(c),d--,F=d,A.unshift(c)}function k(a){var c,d,f=b.getElementsCount(),g=E,h=E*y+a;for(g;f>g&&h<p._ParentSize;g++)h+=y,c=B.pop()||new e,c.handler.width=q,c.handler.height=r,c.position=g*y,c.index=g,d=c.wrapper,d.parentNode?clearTimeout(c.timeout):o.appendChild(d),c.timeout=i(c),A.push(c);E=g}function l(a){var b,c,d;for(b=0;b<A.length;b++)if(b===a){for(d=A[b],c=b;c<A.length-1;c++)A[c]=A[c+1];return A.length=A.length-1,d}}function m(a){var b,c,d,e;for(c=A.length-1;c>=0;c--)b=A[c],d=b.position>p._ParentSize-a,e=b.position+2*y<-a,(e||d)&&(b.timeout=g(b),B.push(l(c)),d?E=b.index:F<b.index&&(F=b.index))}function n(a){m(a),p._ParentSize-a>E*y&&k(a),(F+1)*y>-a&&j(a)}var o,p,q,r,s,t,u,v={},w=c&&c.direction?c.direction:"vertical",x=c?c.itemClass:"",y=0,z=[],A=[],B=[],C=1e3/(c&&c.requiredFPS?c.requiredFPS:20),D=0,E=0,F=-1,G="pointerdown";return s=addVendorPrefix("transform"),"vertical"===w?(z[0]="translate3d(0, ",z[2]="px, 0) scale(1)"):(z[0]="translate3d(",z[2]="px, 0, 0) scale(1)"),o=document.createElement("div"),o.style.width="100%",o.style.height="100%",a.insertBefore(o,a.firstChild),p=new ScrollView(a,c),p._calculateMaxScroll=function(){var a,c,e=q,f=r,i=d(),j=b.getElementsCount();if(F>j-1||0>F){for(F=j>0&&0>F?-1:j-1,E=F+1,c=A.length-1;c>=0;c--)a=A[c],(a.index<F||a.index>=E)&&(a.timeout=g(a),B.push(l(c)));p.scrollPosition=-Math.max(0,F)*i}if(e!==q||f!==r){var k,m;for(p.scrollPosition=-(F+1)*i,y=i,c=A.length-1;c>=0;c-=1)a=A[c],m=a.wrapper,k=a.index*y,z[1]=k,m.style.height=r+"px",m.style.width=q+"px",m.style[s]=z.join(""),a.position=k,a.handler.width=q,a.handler.height=r,b.getElement(A[c].index,a.item,A[c].handler);for(c=B.length-1;c>=0;c-=1)a=B[c],a.handler.width=q,a.handler.height=r,m=a.wrapper,m.style.height=r+"px",m.style.width=q+"px"}p._MaxScroll=y*b.getElementsCount()-p._ParentSize,p.setPosition(p.scrollPosition,!0),h(!0)},v.setPosition=p.setPosition,p.setPosition=function(a,b){clearTimeout(u),v.setPosition.apply(p,arguments),t=window.performance.now(),(t-D>C||b)&&(n(a),h(),D=t),u=setTimeout(f,1e3)},v.handleEvent=p.handleEvent,p.handleEvent=function(a){v.handleEvent.apply(p,arguments),a.type===G&&(n(p.scrollPosition),h(!0))},p.refresh(),n(0),p}