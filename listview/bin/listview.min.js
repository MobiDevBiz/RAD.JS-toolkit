function ListView(a,b,c){function d(){var a,c,d,e=b.getElementsCount();return 0===e?0:(a=b.getElement(0,null,{width:0,height:0}),d=document.createElement("div"),d.style.position="absolute",d.className=z,d.appendChild(a),o.appendChild(d),c=d.getBoundingClientRect(),r=c.height,q=c.width,o.removeChild(d),"vertical"===y?r:q)}function e(){var a=document.createElement("div");a.style.position="absolute",a.style.height=r+"px",a.style.width=q+"px",a.style.webkitFontSmoothing="antialiased",a.className=z,v&&a.addEventListener(c.eventListener.type,v,c.eventListener.useCapture),this.wrapper=a,this.item=null,this.position=null,this.index=0,this.timeout=null,this.handler={width:0,height:0},this.taskTimestamp=0}function f(){if(D.length>1){var a,b=D.pop(),d=b.wrapper.parentNode;d.removeChild(b.wrapper),v&&b.wrapper.removeEventListener(c.eventListener.type,v);for(a in b)b.hasOwnProperty(a)&&(b[a]=null);u=setTimeout(f,150)}}function g(a){return setTimeout(function(){a.wrapper.style[s]="vertical"!==y?"translate3d(0, 999999px, 0)":"translate3d(999999px, 0, 0)"},100)}function h(a){var c,d,e=window.performance.now();for(c=C.length-1;c>=0;c--)if(d=C[c],0!==d.taskTimestamp&&(e-d.taskTimestamp>E||a)){if(d.index<b.getElementsCount()){var f=b.getElement(d.index,d.item,d.handler);d.wrapper.appendChild(f),d.item=f}d.taskTimestamp=0}}function i(a){B[1]=a.position,a.wrapper.style[s]=B.join(""),a.wrapper.setAttribute("data-item",a.index),a.taskTimestamp=window.performance.now()}function j(a){for(var b,c,d=H;d>=0&&(d+1)*A>-a;)c=D.pop()||new e,c.handler.width=q,c.handler.height=r,c.position=d*A,c.index=d,b=c.wrapper,b.parentNode?clearTimeout(c.timeout):o.appendChild(b),c.timeout=i(c),d--,H=d,C.unshift(c)}function k(a){var c,d,f=b.getElementsCount(),g=G,h=G*A+a;for(g;f>g&&h<p._ParentSize;g++)h+=A,c=D.pop()||new e,c.handler.width=q,c.handler.height=r,c.position=g*A,c.index=g,d=c.wrapper,d.parentNode?clearTimeout(c.timeout):o.appendChild(d),c.timeout=i(c),C.push(c);G=g}function l(a){var b,c,d;for(b=0;b<C.length;b++)if(b===a){for(d=C[b],c=b;c<C.length-1;c++)C[c]=C[c+1];return C.length=C.length-1,d}}function m(a){var b,c,d,e;for(c=C.length-1;c>=0;c--)b=C[c],d=b.position>p._ParentSize-a,e=b.position+2*A<-a,(e||d)&&(b.timeout=g(b),D.push(l(c)),d?G=b.index:H<b.index&&(H=b.index))}function n(a){m(a),p._ParentSize-a>G*A&&k(a),(H+1)*A>-a&&j(a)}var o,p,q,r,s,t,u,v,w,x={},y=c&&c.direction?c.direction:"vertical",z=c?c.itemClass:"",A=0,B=[],C=[],D=[],E=1e3/(c&&c.requiredFPS?c.requiredFPS:20),F=0,G=0,H=-1,I=!1,J={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup"};return s=addVendorPrefix("transform"),"vertical"===y?(B[0]="translate3d(0, ",B[2]="px, 0) scale(1)"):(B[0]="translate3d(",B[2]="px, 0, 0) scale(1)"),o=document.createElement("div"),o.style.width="100%",o.style.height="100%",a.insertBefore(o,a.firstChild),p=new ScrollView(a,c),c&&c.eventListener&&(v="object"==typeof c.eventListener.listener?function(a){a.type!==c.eventListener.type||I||c.eventListener.listener.handleEvent(a)}:function(a){a.type!==c.eventListener.type||I||c.eventListener.listener(a)}),p._calculateMaxScroll=function(){var a,c,e=q,f=r,i=d(),j=b.getElementsCount();if(H>j-1||0>H){for(H=j>0&&0>H?-1:j-1,G=H+1,c=C.length-1;c>=0;c--)a=C[c],(a.index<H||a.index>=G)&&(a.timeout=g(a),D.push(l(c)));p.scrollPosition=-Math.max(0,H)*i}if(e!==q||f!==r){var k,m;for(p.scrollPosition=-(H+1)*i,A=i,c=C.length-1;c>=0;c-=1)a=C[c],m=a.wrapper,k=a.index*A,B[1]=k,m.style.height=r+"px",m.style.width=q+"px",m.style[s]=B.join(""),a.position=k,a.handler.width=q,a.handler.height=r,b.getElement(C[c].index,a.item,C[c].handler);for(c=D.length-1;c>=0;c-=1)a=D[c],a.handler.width=q,a.handler.height=r,m=a.wrapper,m.style.height=r+"px",m.style.width=q+"px"}p._MaxScroll=A*b.getElementsCount()-p._ParentSize,p.setPosition(p.scrollPosition,!0),h(!0)},x.setPosition=p.setPosition,p.setPosition=function(a,b){clearTimeout(u),x.setPosition.apply(p,arguments),t=window.performance.now(),(t-F>E||b)&&(n(a),h(),F=t),u=setTimeout(f,1e3)},x.handleEvent=p.handleEvent,p.handleEvent=function(a){switch(x.handleEvent.apply(p,arguments),a.type){case J.pointerdown:n(p.scrollPosition),h(!0),I=!1,w=y===J.vertical?a.screenY:a.screenX;break;case J.pointermove:(y===J.vertical?a.screenY:a.screenX)-w>10&&(I=!0)}},p.refresh(),n(0),p}