function ListView(a,b,c){function d(){var a,c,d,e=b.getElementsCount();return 0===e?0:(a=b.getElement(0,null,{width:0,height:0}),d=document.createElement("div"),d.style.position="absolute",d.className=y,d.appendChild(a),o.appendChild(d),c=d.getBoundingClientRect(),r=c.height,q=c.width,o.removeChild(d),"vertical"===x?r:q)}function e(){var a=document.createElement("div");a.style.position="absolute",a.style.height=r+"px",a.style.width=q+"px",a.style.webkitFontSmoothing="antialiased",a.className=y,v&&a.addEventListener(c.eventListener.type,v,c.eventListener.useCapture),this.wrapper=a,this.item=null,this.position=null,this.index=0,this.timeout=null,this.handler={width:0,height:0},this.taskTimestamp=0}function f(){if(C.length>1){var a,b=C.pop(),d=b.wrapper.parentNode;d.removeChild(b.wrapper),v&&b.wrapper.removeEventListener(c.eventListener.type,v);for(a in b)b.hasOwnProperty(a)&&(b[a]=null);u=setTimeout(f,150)}}function g(a){return setTimeout(function(){a.wrapper.style[s]="vertical"!==x?"translate3d(0, 999999px, 0)":"translate3d(999999px, 0, 0)"},100)}function h(a){var c,d,e=window.performance.now();for(c=B.length-1;c>=0;c--)if(d=B[c],0!==d.taskTimestamp&&(e-d.taskTimestamp>D||a)){if(d.index<b.getElementsCount()){var f=b.getElement(d.index,d.item,d.handler);d.wrapper.appendChild(f),d.item=f}d.taskTimestamp=0}}function i(a){A[1]=a.position,a.wrapper.style[s]=A.join(""),a.wrapper.setAttribute("data-item",a.index),a.taskTimestamp=window.performance.now()}function j(a){for(var b,c,d=G;d>=0&&(d+1)*z>-a;)c=C.pop()||new e,c.handler.width=q,c.handler.height=r,c.position=d*z,c.index=d,b=c.wrapper,b.parentNode?clearTimeout(c.timeout):o.appendChild(b),c.timeout=i(c),d--,G=d,B.unshift(c)}function k(a){var c,d,f=b.getElementsCount(),g=F,h=F*z+a;for(g;f>g&&h<p._ParentSize;g++)h+=z,c=C.pop()||new e,c.handler.width=q,c.handler.height=r,c.position=g*z,c.index=g,d=c.wrapper,d.parentNode?clearTimeout(c.timeout):o.appendChild(d),c.timeout=i(c),B.push(c);F=g}function l(a){var b,c,d;for(b=0;b<B.length;b++)if(b===a){for(d=B[b],c=b;c<B.length-1;c++)B[c]=B[c+1];return B.length=B.length-1,d}}function m(a){var b,c,d,e;for(c=B.length-1;c>=0;c--)b=B[c],d=b.position>p._ParentSize-a,e=b.position+2*z<-a,(e||d)&&(b.timeout=g(b),C.push(l(c)),d?F=b.index:G<b.index&&(G=b.index))}function n(a){m(a),p._ParentSize-a>F*z&&k(a),(G+1)*z>-a&&j(a)}var o,p,q,r,s,t,u,v,w={},x=c&&c.direction?c.direction:"vertical",y=c?c.itemClass:"",z=0,A=[],B=[],C=[],D=1e3/(c&&c.requiredFPS?c.requiredFPS:20),E=0,F=0,G=-1,H=!1,I={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup"};return s=addVendorPrefix("transform"),"vertical"===x?(A[0]="translate3d(0, ",A[2]="px, 0) scale(1)"):(A[0]="translate3d(",A[2]="px, 0, 0) scale(1)"),o=document.createElement("div"),o.style.width="100%",o.style.height="100%",a.insertBefore(o,a.firstChild),p=new ScrollView(a,c),c&&c.eventListener&&(v="object"==typeof c.eventListener.listener?function(a){a.type!==c.eventListener.type||H||c.eventListener.listener.handleEvent(a)}:function(a){a.type!==c.eventListener.type||H||c.eventListener.listener(a)}),p._calculateMaxScroll=function(){var a,c,e=q,f=r,i=d(),j=b.getElementsCount();if(G>j-1||0>G){for(G=j>0&&0>G?-1:j-1,F=G+1,c=B.length-1;c>=0;c--)a=B[c],(a.index<G||a.index>=F)&&(a.timeout=g(a),C.push(l(c)));p.scrollPosition=-Math.max(0,G)*i}if(e!==q||f!==r){var k,m;for(p.scrollPosition=-(G+1)*i,z=i,c=B.length-1;c>=0;c-=1)a=B[c],m=a.wrapper,k=a.index*z,A[1]=k,m.style.height=r+"px",m.style.width=q+"px",m.style[s]=A.join(""),a.position=k,a.handler.width=q,a.handler.height=r,b.getElement(B[c].index,a.item,B[c].handler);for(c=C.length-1;c>=0;c-=1)a=C[c],a.handler.width=q,a.handler.height=r,m=a.wrapper,m.style.height=r+"px",m.style.width=q+"px"}p._MaxScroll=z*b.getElementsCount()-p._ParentSize,p.setPosition(p.scrollPosition,!0),h(!0)},w.setPosition=p.setPosition,p.setPosition=function(a,b){clearTimeout(u),w.setPosition.apply(p,arguments),t=window.performance.now(),(t-E>D||b)&&(n(a),h(),E=t),u=setTimeout(f,1e3)},w.handleEvent=p.handleEvent,p.handleEvent=function(a){switch(w.handleEvent.apply(p,arguments),a.type){case I.pointerdown:n(p.scrollPosition),h(!0),H=!1;break;case I.pointermove:H=!0}},p.refresh(),n(0),p}