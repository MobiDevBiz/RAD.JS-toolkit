function addVendorPrefix(a){function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}var c,d=["ms","Ms","moz","Moz","webkit","Webkit","o","O"],e=document.createElement("div"),f=null,g=[];for(c=0;c<d.length;c+=1)g.push(d[c]+b(a));for(g.push(a),c=0;c<g.length;c+=1)if(void 0!==e.style[g[c]]){f=g[c];break}return f}function Pool(a,b,c){function d(b){var c;return c=new a,c[j]=function(){var a;h.push(b),a=i.indexOf(b),i[a]=i[i.length-1],i.length-=1},f[b]=c,b}function e(a){var b,c;for(b=0,c=a;c>b;b++)d(b),g++,h.push(b)}var f={},g=0,h=[],i=[],j="string"==typeof c?c:"release";return this.get=function(){var a;return h.length>0?a=h.pop():(a=d(g),g++),i.push(a),f[a]},e(b),this}function ListView(a,b,c){function d(){var a,c,d,e=b.getElementsCount();return 0===e?0:(a=b.getElement(0,null,{width:0,height:0}),d=document.createElement("div"),d.style.position="absolute",d.className=w,d.appendChild(a),n.appendChild(d),c=d.getBoundingClientRect(),q=c.height,p=c.width,n.removeChild(d),"vertical"===v?q:p)}function e(){var a=document.createElement("div");a.style.position="absolute",a.style.height=q+"px",a.style.width=p+"px",a.style.webkitFontSmoothing="antialiased",a.className=w,this.wrapper=a,this.item=null,this.position=null,this.index=0,this.timeout=null,this.handler={width:0,height:0}}function f(){if(A.length>1){var a,b=A.pop(),c=b.wrapper.parentNode;c.removeChild(b.wrapper);for(a in b)b.hasOwnProperty(a)&&(b[a]=null);t=setTimeout(f,150)}}function g(a){return setTimeout(function(){a.wrapper.style[r]="vertical"!==v?"translate3d(0, 999999px, 0)":"translate3d(999999px, 0, 0)"},100)}function h(a){var c=a.index,d=a.wrapper,e=a.handler;if(y[1]=a.position,a.wrapper.style[r]=y.join(""),a.wrapper.setAttribute("data-item",a.index),c<b.getElementsCount()){var f=b.getElement(c,a.item,e);d.appendChild(f),a.item=f}}function i(a){for(var b,c,d=E;d>=0&&(d+1)*x>-a;)c=A.pop()||new e,c.handler.width=p,c.handler.height=q,c.position=d*x,c.index=d,b=c.wrapper,b.parentNode?clearTimeout(c.timeout):n.appendChild(b),c.timeout=h(c),d--,E=d,z.unshift(c)}function j(a){var c,d,f=b.getElementsCount(),g=D,i=D*x+a;for(g;f>g&&i<o._ParentSize;g++)i+=x,c=A.pop()||new e,c.handler.width=p,c.handler.height=q,c.position=g*x,c.index=g,d=c.wrapper,d.parentNode?clearTimeout(c.timeout):n.appendChild(d),c.timeout=h(c),z.push(c);D=g}function k(a){var b,c,d;for(b=0;b<z.length;b++)if(b===a){for(d=z[b],c=b;c<z.length-1;c++)z[c]=z[c+1];return z.length=z.length-1,d}}function l(a){var b,c,d,e;for(c=z.length-1;c>=0;c--)b=z[c],d=b.position>o._ParentSize-a,e=b.position+2*x<-a,(e||d)&&(b.timeout=g(b),A.push(k(c)),d?D=b.index:E<b.index&&(E=b.index))}function m(a){l(a),o._ParentSize-a>D*x&&j(a),(E+1)*x>-a&&i(a)}var n,o,p,q,r,s,t,u={},v=c&&c.direction?c.direction:"vertical",w=c?c.itemClass:"",x=0,y=[],z=[],A=[],B=1e3/(c&&c.requiredFPS?c.requiredFPS:20),C=0,D=0,E=-1;return r=addVendorPrefix("transform"),"vertical"===v?(y[0]="translate3d(0, ",y[2]="px, 0) scale(1)"):(y[0]="translate3d(",y[2]="px, 0, 0) scale(1)"),n=document.createElement("div"),n.style.width="100%",n.style.height="100%",a.insertBefore(n,a.firstChild),o=new ScrollView(a,c),o._calculateMaxScroll=function(){var a,c,e=p,f=q,h=d(),i=b.getElementsCount();if(E>i-1||0>E){for(E=i>0&&0>E?-1:i-1,D=E+1,c=z.length-1;c>=0;c--)a=z[c],(a.index<E||a.index>=D)&&(a.timeout=g(a),A.push(k(c)));o.scrollPosition=-Math.max(0,E)*h}if(e!==p||f!==q){var j,l;for(o.scrollPosition=-(E+1)*h,x=h,c=z.length-1;c>=0;c-=1)a=z[c],l=a.wrapper,j=a.index*x,y[1]=j,l.style.height=q+"px",l.style.width=p+"px",l.style[r]=y.join(""),a.position=j,a.handler.width=p,a.handler.height=q,b.getElement(z[c].index,a.item,z[c].handler);for(c=A.length-1;c>=0;c-=1)a=A[c],a.handler.width=p,a.handler.height=q,l=a.wrapper,l.style.height=q+"px",l.style.width=p+"px"}o._MaxScroll=x*b.getElementsCount()-o._ParentSize,o.setPosition(o.scrollPosition,!0)},u.setPosition=o.setPosition,o.setPosition=function(a,b){clearTimeout(t),u.setPosition.apply(o,arguments),s=window.performance.now(),(s-C>B||b)&&(m(a),C=s),t=setTimeout(f,1e3)},o.refresh(),m(0),o}function GestureAdapter(a,b){var c=this;return c.destroy=function(){c.isTouched?(c._el.removeEventListener("touchstart",this),c._el.removeEventListener("touchend",this),c._el.removeEventListener("touchmove",this),c._el.removeEventListener("touchcancel",this)):(clearTimeout(c.mouseWheelTimeout),c._el.removeEventListener("mousedown",this),c._el.removeEventListener("mouseup",this),c._el.removeEventListener("mousemove",this),c._el.removeEventListener("mouseout",this),c._el.removeEventListener("mousewheel",c),c._el.removeEventListener("DOMMouseScroll",c)),delete c._el,delete c._listener},c._el=a,c._listener=b,c._tmpCoords={},c.isTouched?(c._el.addEventListener("touchstart",c,!1),c._el.addEventListener("touchend",c,!1),c._el.addEventListener("touchmove",c,!1),c._el.addEventListener("touchcancel",c,!1)):(c._el.addEventListener("mousedown",c,!1),c._el.addEventListener("mouseup",c,!1),c._el.addEventListener("mousemove",c,!1),c._el.addEventListener("mouseout",c,!1),c._el.addEventListener("mouseover",c,!1),c._el.addEventListener("mousewheel",c,!1),c._el.addEventListener("DOMMouseScroll",c,!1)),c}function Animator(a){var b=a&&a.easing?a.easing:null,c=a&&a.boundsEasing?a.boundsEasing:null;this.isTweaking=!1,this.isAnimating=!1,this._easing="function"==typeof b?b:this[b],this._bounds=a&&a.bounds?!0:!1,this._boundsEasing="function"==typeof c?c:this[c],this._keepAbsoluteMetrics=a&&a.keepAbsoluteMetrics?!0:!1,this.checkBounds=this._bounds?function(a){return this._lastPosition=this._lastPosition||a,a<this.minPosition&&(a=this._lastPosition+(a-this._lastPosition)/3),a>this.maxPosition&&(a=this._lastPosition+(a-this._lastPosition)/3),this._lastPosition=a,a}:function(a){return a<this.minPosition&&(a=this.minPosition),a>this.maxPosition&&(a=this.maxPosition),a}}function ScrollView(a,b){function c(a){q.stop(),l=a[r]}function d(a){n.setPosition(n.scrollPosition-(l-a[r])),l=a[r]}function e(a){n.setPosition(n.scrollPosition-(l-a[r])),q.tweakIfNeeded(n.scrollPosition,n.setPosition)}function f(){clearTimeout(n.resizeTimeout),n.resizeTimeout=setTimeout(n.reflow,150)}var g,h,i,j,k,l,m,n=this,o={vertical:"vertical",fling:"fling",pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup"},p=b&&b.direction?b.direction:o.vertical,q=new Animator({easing:b&&b.easing?b.easing:"easeOutQuad",bounds:b?!!b.bounds:!1}),r=p===o.vertical?"screenY":"screenX",s=p===o.vertical?"offsetHeight":"offsetWidth",t=[];n._calculateMaxScroll=function(){n._MaxScroll=g[s]-n._ParentSize},n.setPosition=function(a,b){n.scrollPosition=b?a:q.checkBounds(a),t[1]=n.scrollPosition,g.style[h]=t.join("")},n.scroll=function(a,b){q.animate(n.scrollPosition,n.scrollPosition+a,b,n.setPosition)},n.refresh=function(){q.stop(),n._calculateMaxScroll(),q.setBounds(Math.min(0,-n._MaxScroll),0,n._ParentSize/2.5),g[s]?q.tweakIfNeeded(n.scrollPosition,n.setPosition):n.setPosition(0)},n.reflow=function(){var a=n.container,b=a.offsetHeight,c=a.offsetWidth;0===b||b===k&&c===j||(n._ParentSize=a[s],k=b,j=c,n.refresh())},n.getMaxPosition=function(){return n._MaxScroll},n.destroy=function(){window.removeEventListener("resize",f),clearTimeout(n.resizeTimeout)},n.handleEvent=function(a){switch(a.type){case o.fling:m(a);break;case o.pointerdown:c(a);break;case o.pointermove:a.origin.preventDefault(),d(a);break;case o.pointerup:e(a)}a.release()},n.container=a,n.scrollPosition=0,m=function(a){return a?function(a){a.direction===o.vertical&&q.startFling(n.scrollPosition,a.speed,n.setPosition)}:function(a){a.direction!==o.vertical&&q.startFling(n.scrollPosition,a.speed,n.setPosition)}}(p===o.vertical),p===o.vertical?(t[0]="translate3d(0, ",t[2]="px, 0) scale(1)"):(t[0]="translate3d(",t[2]="px, 0, 0) scale(1)"),i=addVendorPrefix("transition"),h=addVendorPrefix("transform");var u=["fixed","relative","absolute"],v=u.indexOf(window.getComputedStyle(a,null).position);return a.style.position=-1===v?"relative":u[v],a.style.overflow="hidden",g=a.firstElementChild,g.style[p===o.vertical?"width":"height"]="100%",g.style.margin=0,g.style.position="absolute",g.style[i]="transform 0ms",n.reflow(),window.addEventListener("resize",f,!1),n}GestureAdapter.prototype=function(){function a(a,b){if(a.timeStamp-b.preLastMove.timeStamp>10){var c=q(a,b);b.lastMove.screenX=b.preLastMove.screenX,b.lastMove.screenY=b.preLastMove.screenY,b.lastMove.timeStamp=b.preLastMove.timeStamp,b.preLastMove.screenX=c.screenX,b.preLastMove.screenY=c.screenY,b.preLastMove.timeStamp=a.timeStamp}}function b(a,b,c,d){return Math.abs(a-c)>Math.abs(b-d)?m.horizontal:m.vertical}function c(a,b,c){var d=q(b,c),e=o.get();e.type=a,e.clientX=d.clientX,e.clientY=d.clientY,e.screenX=d.screenX,e.screenY=d.screenY,e.timeStamp=b.timeStamp,e.origin=b,c._listener.handleEvent(e)}function d(a,b,c,d,e,f){return Math.abs(a-d)>Math.abs(b-e)?(d-a)/(f-c):(e-b)/(f-c)}function e(a,b,c,d){return Math.pow((c-a)*(c-a)+(d-b)*(d-b),.5)}function f(a,c){var f,g=q(a,c);100*Math.abs(e(c.lastMove.screenX,c.lastMove.screenY,g.screenX,g.screenY)/(a.timeStamp-c.lastMove.timeStamp))>>0>0&&(f=p.get(),f.type=m.fling,f.velocity=e(c.startX,c.startY,g.screenX,g.screenY)/(a.timeStamp-c.timeStamp),f.direction=b(c.startX,c.startY,g.screenX,g.screenY),f.speed=d(c.startX,c.startY,c.timeStamp,g.screenX,g.screenY,a.timeStamp),f.start.screenX=c.startX,f.start.screenY=c.startY,f.start.clientX=c.startClientX,f.start.clientY=c.startClientY,f.start.timeStamp=c.timeStamp,f.end.screenX=g.screenX,f.end.screenY=g.screenY,f.end.clientX=g.clientX,f.end.clientY=g.clientY,f.end.timeStamp=a.timeStamp,c._listener.handleEvent(f))}function g(a,b){var d=q(a,b);b.startX=d.screenX,b.startY=d.screenY,b.startClientX=d.clientX,b.startClientY=d.clientY,b.timeStamp=a.timeStamp,b.moved=!1,b.isDown=!0,b.touchStartTime=a.timeStamp,b.lastMove=b.lastMove||{},b.preLastMove=b.preLastMove||{},b.lastMove.screenX=b.preLastMove.screenX=0,b.lastMove.screenY=b.preLastMove.screenY=0,b.lastMove.timeStamp=b.preLastMove.timeStamp=a.timeStamp,c(m.pointerdown,a,b)}function h(b,d){var e=q(b,d);d.isDown&&(a(b,d),c(m.pointermove,b,d),(Math.abs(e.screenY-d.startY)>10||Math.abs(e.screenX-d.startX)>10)&&(d.moved=!0))}function i(a,b){var d=a.timeStamp-b.touchStartTime;b.isDown&&(b.isDown=!1,b.moved?f(a,b):300>=d?c(m.tap,a,b):c(m.longtap,a,b),c(m.pointerup,a,b))}function j(a,b){clearTimeout(b.mouseOutTimeout)}function k(a,b){b.mouseOutTimeout=setTimeout(function(){i(a,b)},10)}function l(a,b){var d=10*((a.wheelDelta||-a.detail)>0?1:-1);clearTimeout(b.mouseWheelTimeout),a.preventDefault(),a.stopPropagation(),a={clientX:a.clientX,clientY:a.clientY,screenX:a.screenX,screenY:0,timeStamp:a.timeStamp,preventDefault:function(){},stopPropagation:function(){}},b.isDown||(b.isDown=!0,b.moved=!0,b.useMouseWheel=!0,b.currentWheelPosition=0,b.acceleration=d,g(a,b)),b.acceleration*=1.2,b.currentWheelPosition+=b.acceleration,a.screenY=b.currentWheelPosition,h(a,b),b.mouseWheelTimeout=setTimeout(function(){c(m.pointerup,a,b),b.isDown=!1,b.moved=!1,b.useMouseWheel=!1},200)}var m={touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend",touchleave:"touchleave",touchcancel:".touchcancel",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",mouseover:"mouseover",mouseout:"mouseout",mousewheel:"mousewheel",wheel:"DOMMouseScroll",horizontal:"horizontal",vertical:"vertical",fling:"fling",tap:"tap",longtap:"longtap",pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup"},n="ontouchstart"in window,o=new Pool(function(){},100),p=new Pool(function(){this.start={},this.end={}},10),q=function(){return n?function(a,b){var c;return c=a.type!==m.touchend?a.touches[0]:a.changedTouches[0],b._tmpCoords.screenX=c.screenX,b._tmpCoords.screenY=c.screenY,b._tmpCoords.clientX=c.clientX,b._tmpCoords.clientY=c.clientY,b._tmpCoords}:function(a,b){return b._tmpCoords.screenX=a.screenX,b._tmpCoords.screenY=a.screenY,b._tmpCoords.clientX=a.clientX,b._tmpCoords.clientY=a.clientY,b._tmpCoords}}();return{isTouched:n,handleEvent:function(a){switch(a.type){case m.touchmove:case m.mousemove:this.useMouseWheel||h(a,this);break;case m.touchstart:case m.mousedown:g(a,this);break;case m.touchend:case m.mouseup:i(a,this);break;case m.mouseover:j(a,this);break;case m.touchleave:case m.touchcancel:case m.mouseout:k(a,this);break;case m.wheel:case m.mousewheel:l(a,this)}}}}(),window.performance=window.performance||{},window.performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}(),function(){var a,b,c,d,e=0,f=["ms","moz","webkit","o"];for(a=0;a<f.length&&!window.requestAnimationFrame;a+=1)window.requestAnimationFrame=window[f[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[a]+"CancelAnimationFrame"]||window[f[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){return b=window.performance.now(),c=Math.max(0,16-(b-e)),d=window.setTimeout(function(){a(b+c)},c),e=b+c,d}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),Animator.prototype=function(){function a(){var c=document.createElement("div");c.style.position="absolute",c.style.height="1in",c.style.width="1in",c.style.left="-100%",c.style.top="-100%",document.body.appendChild(c),b.DPI=c.offsetHeight,document.body.removeChild(c),window.removeEventListener("load",a)}var b={};return b.linear=function(a){return a},b.easeInQuad=function(a){return a*a},b.easeOutQuad=function(a){return a*(2-a)},b.easeOutSin=function(a){return Math.sin(a*Math.PI/2)},b.easeInOutQuad=function(a){return.5>a?2*a*a:-1+(4-2*a)*a},b.easeInCubic=function(a){return a*a*a},b.easeOutCubic=function(a){return--a*a*a+1},b.easeInOutCubic=function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},b.easeInQuart=function(a){return a*a*a*a},b.easeOutQuart=function(a){return 1- --a*a*a*a},b.easeInOutQuart=function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},b.easeInQuint=function(a){return a*a*a*a*a},b.easeOutQuint=function(a){return 1+--a*a*a*a*a},b.easeInOutQuint=function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a},b.KeySpline=function(a,b,c,d){function e(a,b){return 1-3*b+3*a}function f(a,b){return 3*b-6*a}function g(a){return 3*a}function h(a,b,c){return((e(b,c)*a+f(b,c))*a+g(b))*a}function i(a,b,c){return 3*e(b,c)*a*a+2*f(b,c)*a+g(b)}function j(b){for(var d=b,e=0;4>e;++e){var f=i(d,a,c);if(0==f)return d;var g=h(d,a,c)-b;d-=g/f}return d}return function(e){return a==b&&c==d?e:h(j(e),b,d)}},b.animate=function(a,b,c,d,e){function f(e){if(h=(e-g)/c,i=h>1?1:h,(1>i||!g)&&l.isAnimating&&(l._animationID=window.requestAnimationFrame(f,null)),k)return g=e,void(k=!1);if(l._currentPosition=j(i)*(b-a)+a,i>=1&&(l.isTweaking=!1,l.isAnimating=!1,l._currentPosition=Math.round(l._currentPosition)),l._bounds){var m=0;l._currentPosition<l.minPosition&&(m=l._currentPosition-l.minPosition),l._currentPosition>l.maxPosition&&(m=l._currentPosition-l.maxPosition),m&&(l.isTweaking||(Math.abs(m)>l.margin||!l.isAnimating)&&(l.stop(),l.isTweaking=!0,l.animate(l._currentPosition,l._currentPosition-m,Math.min(2*Math.abs(m),350),l._callback,l._boundsEasing||"easeOutQuad")))}else l._currentPosition=l.checkBounds(l._currentPosition);d(l._currentPosition)}var g,h,i,j,k=!0,l=this;a!==b&&(j="function"==typeof e?e:"string"==typeof e?this[e]:this._easing,this.isAnimating=!0,this._callback=d,window.requestAnimationFrame(f,null))},b.FRICTION=25e-6,b.startFling=function(b,c,d){var e,f,g=c&&c/Math.abs(c),h=this.FRICTION;this.DPI||this._keepAbsoluteMetrics||a(),this._keepAbsoluteMetrics||(h=this.FRICTION*this.DPI),e=Math.abs(c)/h,f=g*c*c/h,this.animate(b,b+f,e,d)},b.tweakIfNeeded=function(a,b){var c=0;this.isAnimating||(a<this.minPosition&&(c=a-this.minPosition),a>this.maxPosition&&(c=a-this.maxPosition),c&&(this.isTweaking=!0,this.animate(a,a-c,Math.min(2*Math.abs(c),350),b,this._boundsEasing||"easeOutQuad")))},b.setBounds=function(a,b,c){this.minPosition=a,this.maxPosition=b,this.margin=c||0},b.isStopped=function(){return!this.isAnimating},b.stop=function(){this.isAnimating&&(window.cancelAnimationFrame(this._animationID),this.isAnimating=!1,"function"==typeof this._callback&&(this._currentPosition=Math.round(this._currentPosition),this._callback(this._currentPosition)))},window.addEventListener("load",a,!1),b}();