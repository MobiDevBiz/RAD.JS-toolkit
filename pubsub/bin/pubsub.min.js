function PubSub(){function a(){e&&console.log.apply(null,arguments)}function b(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}var c={},d={},e=!1,f=".";return{printLog:function(a){return e=a,this},setSeparator:function(a){return f=a,this},publish:function(b,e,g){var h,i,j,k,l,m,n,o=b.split(f);for(a(this.radID+" publish:",arguments),"sticky"===g&&(d[b]=arguments),h=0,k=o.length;k>h;h+=1)if(n=o.slice(0,h+1).join(f),c[n])for(i=0,j=c[n].length;j>i;i+=1)l=c[n][i],l.callback.apply(l.context,arguments),m=l.context.options||l.context,a("receiver:"+m.radID+" channel:"+n,arguments);return this},subscribe:function(e,g,h){var i,j,k,l,m=h||this,n=e.split(f);for(i=m.radID=m.radID||b(),c[e]=c[e]||[],c[e].push({context:m,callback:g,ID:i}),a(i+" subscribe to channel:"+e,arguments),j=0,k=n.length;k>j;j+=1)l=n.slice(0,j+1).join(f),d[l]&&g.apply(m,d[l]);return this},unsubscribe:function(b,d){var e,f,g,h;if(b&&b.radID){h=b.radID;for(e in c)if(c.hasOwnProperty(e))for(f=c[e].length-1,g=0;f>=g;f-=1)if((null===d||d===e)&&c[e][f].ID===h&&(a(h+" unsubscribe from channel:"+e,arguments),c[e].splice(f,1),d))return this}return this}}}